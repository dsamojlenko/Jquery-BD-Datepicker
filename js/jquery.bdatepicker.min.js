(function($){$.fn.BDatePicker=function(params){params=$.extend({daysToAdd:null,noWeekends:false,holidayList:[]},params);var noWeekends=params.noWeekends;var daysToAdd=params.daysToAdd;var holidaysToAdd=0;var holidayList=params.holidayList;var holidayArray=new Array();var startdate=new Date();var count=0;$.each(holidayList,function(key,item){if(item.date!=null){holidayArray[count]=item.date;count++}});if(daysToAdd!=null){var newdate=new Date();if(noWeekends){var day=startdate.getDay();newdate.setDate(startdate.getDate()+daysToAdd+(day===6?2:+!day)+(Math.floor((daysToAdd-1+(day%6||1))/5)*2))}else{newdate.setDate(startdate.getDate()+daysToAdd)}}if(holidayArray.length>0){$.each(holidayArray,function(index,value){var holidayDate=new Date(value);if(holidayDate>startdate&&holidayDate<newdate){holidaysToAdd++}});if(daysToAdd!=null){if(holidaysToAdd>0){newdate.setDate(newdate.getDate()+holidaysToAdd)}}}return this.datepicker({minDate:newdate,beforeShowDay:function(date){var sdate=$.datepicker.formatDate('mm-dd-yy',date);if($.inArray(sdate,holidayArray)>-1)return[false];if(noWeekends){return $.datepicker.noWeekends(date)}return[true]}})}})(jQuery);